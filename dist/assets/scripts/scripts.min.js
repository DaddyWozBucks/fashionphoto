angular.module("sportium",["sportium.controllers","sportium.services","sportium.directives","sportium.filters","ui.router","ngAnimate","ngSanitize","firebase","ngMaterial","angular-storage","pascalprecht.translate","ngIdle","jsonFormatter"]).run(["$rootScope","$state",function(t,e){t.$on("$stateChangeError",function(t,n,r,o,i,a){"AUTH_REQUIRED"===a&&e.go("app.landing")})}]).config(["$mdDateLocaleProvider",function(t){t.formatDate=function(t){return moment(t).format("YYYY-MM-DD")}}]).config(["$translateProvider",function(t){t.useStaticFilesLoader({prefix:"../translations/",suffix:".json"}).preferredLanguage("en").useMissingTranslationHandlerLog().useSanitizeValueStrategy(null)}]).config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self"])}]).run(["$rootScope","$state",function(t,e){t.stateIsLoading=!0,t.$on("$stateChangeStart",function(){t.stateIsLoading=!0})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,n){t.state("app",{url:"/app","abstract":!0,views:{header:{templateUrl:"templates/app.html",controller:"AppCtrl"}}}).state("app.home",{url:"/home",views:{main:{templateUrl:"templates/home.html",controller:"HomeCtrl"}}}).state("app.data_entry",{url:"/entry",views:{main:{templateUrl:"templates/entry.html",controller:"EntryCtrl"}}}).state("app.landing",{url:"/landing",views:{main:{templateUrl:"templates/landing.html",controller:"LandingCtrl"}}}),e.otherwise(function(){return"/app/home"})}]).config(["$mdThemingProvider",function(t){t.theme("default")}]),angular.module("sportium.controllers",["sportium.services","sportium.filters"]).controller("AppCtrl",["$scope","$log","$state","$stateParams","$rootScope","$http","$anchorScroll","$mdSidenav","$mdMedia","$translate",function(t,e,n,r,o,i,a,l,s,u){t.popSideNav=function(){l("menu").toggle()},t.mQ=function(t){return s(t)},t.sideNavLink=function(t,e){l("menu").close().then(function(){n.go(t,e)})},t.setLang=function(e){t.lang=e,u.use(e)},t.setLang("en"),t.refreshState=function(){var e=n.current.name.replace("app.","");t.currentState=e.replace("_"," ")},t.showNavSteps=!0,t.hideNavSteps=function(){t.showNavSteps=!t.showNavSteps}}]).controller("LandingCtrl",["$scope","$sce","$interval",function(t,e,n){t.ytUrl=e.trustAsResourceUrl("https://www.youtube.com/embed/bJD067WdqKU?controls=0&showinfo=0&rel=0&autoplay=1&loop=1&playlist=bJD067WdqKU"),t.refreshState(),t.gIndex=0,t.gifs=["https://www.bloodsweatandtears.eu/apa/sportium/sportium1.gif","https://www.bloodsweatandtears.eu/apa/sportium/sportium2.gif","https://www.bloodsweatandtears.eu/apa/sportium/sportium3.gif"],n(function(){t.gIndex<2?t.gIndex+=1:t.gIndex=0},3300),t.hideNavSteps()}]).controller("HomeCtrl",["$scope","$http","$interval",function(t,e,n){t.refreshState()}]).controller("EntryCtrl",["$scope","$http","$stateParams","Results",function(t,e,n,r){t.refreshState(),t.newEntry={sport:"auto"},t.sports=["tennis","football","nfl","auto"],t.entries=[],t.saveEntry=function(){r.parse(t.newEntry.sport,t.newEntry.text).then(function(e){t.entries.push(e)})}}]),angular.module("sportium.directives",[]).directive("tagEnter",function(){return function(t,e,n){e.bind("keydown keypress",function(e){var r=e.which||e.keyCode;13===r&&(t.$apply(function(){t.$eval(n.dlEnterKey)}),e.preventDefault())})}}).directive("threeKeys",function(){return function(t,e,n){var r=0;e.bind("keydown keypress",function(e){r++,r>=3&&(t.$apply(function(){t.$eval(n.myOnKeyDownCall)}),e.preventDefault())})}}).directive("myAutocomplete",function(){return{require:"ngModel",replace:!0,scope:{ngModel:"=",address1:"=",city:"=",state:"=",country:"=",zip:"="},template:'<input class="form-control" type="text" data-tap-disabled>',link:function(t,e,n,r){var o={},i=new google.maps.places.Autocomplete(e[0],o);google.maps.event.addListener(i,"place_changed",function(){t.$apply(function(){var n=i.getPlace(),o=n.address_components;t.address1=o[0].short_name+" "+o[1].short_name,t.city=o[3].short_name,t.state=o[5].short_name,t.country=o[6].long_name,t.zip=o[7].short_name,r.$setViewValue(e.val())})})}}}).directive("backImg",function(){return function(t,e,n){var r=n.backImg;e.css({"background-image":"url("+r+")","background-size":"cover"})}}).directive("disabletap",["$timeout",function(t){return{link:function(){t(function(){container=document.getElementsByClassName("pac-container"),angular.element(container).attr("data-tap-disabled","true"),angular.element(container).on("click",function(){document.getElementById("type-selector").blur()})},500)}}}]).directive("onLongPress",["$timeout",function(t){return{restrict:"A",link:function(e,n,r){n.bind("touchstart",function(n){e.longPress=!0,t(function(){e.longPress&&e.$apply(function(){e.$eval(r.onLongPress)})},600)}),n.bind("touchend",function(t){e.longPress=!1,r.onTouchEnd&&e.$apply(function(){e.$eval(r.onTouchEnd)})})}}}]).directive("myDirective",function(){return{restrict:"EA",scope:{title:"@"},templateUrl:"mytemplate.html",controller:controllerFunction,link:function(t,e,n){}}}).directive("ngDrag",["$document",function(t){return{link:function(e,n,r){function o(t){u=t.pageY-l,s=t.pageX-a,n.css({top:u+"px",left:s+"px"})}function i(){t.off("mousemove",o),t.off("mouseup",i)}var a=0,l=0,s=0,u=0;n.on("mousedown",function(e){e.preventDefault(),a=e.pageX-s,l=e.pageY-u,t.on("mousemove",o),t.on("mouseup",i)})}}}]),angular.module("sportium.filters",[]).filter("OWMIcon",function(){return function(t){return"http://openweathermap.org/img/w/"+t+".png"}}).filter("kelvinFormat",function(){return function(t,e){var n;return"C"==e?(n=Math.floor(t-273.15),n+" "+e):"F"==e?(n=Math.floor(9*t/5-459.67),n+" "+e):void 0}}).filter("capitalise",function(){return function(t){return t?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():""}}).filter("kelvin",function(){return function(t,e){var n;return"C"==e?n=Math.floor(t-273.15):"F"==e?n=Math.floor(9*t/5-459.67):void 0}}).filter("kph",function(){return function(t){var e=Math.floor(3600*t/1e3);return e+" kph"}}),jQuery.expr.filters.offscreen=function(t){var e=t.getBoundingClientRect();return e.x+e.width<0||e.y+e.height<0||e.x>window.innerWidth||e.y>window.innerHeight},function(t){var e=t(window);t.fn.visible=function(n,r,o,i){if(!(this.length<1)){o=o||"both";var a=this.length>1?this.eq(0):this,l="undefined"!=typeof i&&null!==i,s=l?t(i):e,u=l?s.position():0,c=a.get(0),f=s.outerWidth(),p=s.outerHeight(),m=r!==!0||c.offsetWidth*c.offsetHeight;if("function"==typeof c.getBoundingClientRect){var d=c.getBoundingClientRect(),g=l?d.top-u.top>=0&&d.top<p+u.top:d.top>=0&&d.top<p,h=l?d.bottom-u.top>0&&d.bottom<=p+u.top:d.bottom>0&&d.bottom<=p,v=l?d.left-u.left>=0&&d.left<f+u.left:d.left>=0&&d.left<f,$=l?d.right-u.left>0&&d.right<f+u.left:d.right>0&&d.right<=f,w=n?g||h:g&&h,y=n?v||$:v&&$,w=d.top<0&&d.bottom>p||w,y=d.left<0&&d.right>f||y;if("both"===o)return m&&w&&y;if("vertical"===o)return m&&w;if("horizontal"===o)return m&&y}else{var b=l?0:u,S=b+p,x=s.scrollLeft(),k=x+f,C=a.position(),A=C.top,E=A+a.height(),O=C.left,L=O+a.width(),P=n===!0?E:A,B=n===!0?A:E,D=n===!0?L:O,N=n===!0?O:L;if("both"===o)return!!m&&B<=S&&P>=b&&N<=k&&D>=x;if("vertical"===o)return!!m&&B<=S&&P>=b;if("horizontal"===o)return!!m&&N<=k&&D>=x}}}}(jQuery),angular.module("sportium.services",[]).factory("Results",["$http","$q",function(t,e){function n(t){var n=e.defer(),r=t.split("-"),o=r[0].split(" "),i=r[1].split(" "),a=o[o.length-1],l=i[0],s="",u="";return angular.forEach(o,function(t){t!=o[o.length-1]&&(s+=" ",s+=t)}),angular.forEach(i,function(t){t!=i[0]&&(u+=" ",u+=t)}),n.resolve({teamAName:s,teamBName:u,teamAScore:a,teamBScore:l,sport:"football"}),n.promise}function r(t){var n=e.defer(),r=t.split("-"),o=!1,i=/\(([^)]+)\)/;o=r[1].indexOf("*")>=0;var a=r[0].split(" "),l=r[1].split(" "),s=a[a.length-1],u=l[0],c=r[0].split("(")[0].slice(0,r[0].split("(")[0].length-1).replace(/\*/,""),f=r[1].split(")")[1].slice(1,r[1].split(")")[1].length).replace(/\*/,""),p=a[a.length-2],m=l[1],d=i.exec(r[0])[1],g=i.exec(r[1])[1],h={sport:"tennis",teamAName:c,teamBName:f,teamAScore:s,teamBScore:u,teamAGames:p,teamBGames:m,teamBServing:o,scoreboard:{elements:[{title:"Sets",teamAScore:d,teamBScore:g}]}};return n.resolve(h),n.promise}function o(t){var n=e.defer(),r=t.split("-"),o="",i="";r[1].indexOf("1st")>=0?(o=r[1].slice(r[1].indexOf("1st"),r[1].length),i=r[1].slice(0,r[1].indexOf("1st")-1)):r[1].indexOf("2nd")>=0?(o=r[1].slice(r[1].indexOf("2nd"),r[1].length),i=r[1].slice(0,r[1].indexOf("2nd")-1)):r[1].indexOf("3rd")>=0?(o=r[1].slice(r[1].indexOf("3rd"),r[1].length),i=r[1].slice(0,r[1].indexOf("3rd")-1)):r[1].indexOf("4th")>=0&&(o=r[1].slice(r[1].indexOf("4th"),r[1].length),i=r[1].slice(0,r[1].indexOf("4th")-1));var a=r[0].split(" "),l=i.split(" "),s=a.splice(a.length-1,1)[0],u=l.splice(0,1)[0],c=a.join(" "),f=l.join(" "),p={sport:"nfl",teamAName:c,teamBName:f,teamAScore:s,teamBScore:u,currentPeriod:o};return n.resolve(p),n.promise}function i(t){return t.indexOf("Quarter")>-1?o(t):t.indexOf("*")>-1?r(t):n(t)}function a(t,e){switch(t){case"football":return n(e);case"nfl":return o(e);case"tennis":return r(e);case"auto":return i(e);default:return" "}}return{parse:function(t,e){return a(t,e)}}}]);